<div class="container my-5">
  <div class="row" style="margin-top:100px;">
    <div class="col">
      <%= image_tag @recipe.image, width:400, heigth:250,class: "img-resize, rounded mx-auto d-block" %>
      <div class="d-flex align-items-center">
        <h1 class="mt-5 px-5 border-bottom border-3" style="display: flex; align-items: center;">
          <%= @recipe.name %>
          <i class="fa-regular fa-clock" style="color: black;margin-left: 100px; font-size:25px;"></i>
          <span style="font-size: 25px; margin-left: 10px;"><%= @recipe.time %></span>
          <span style="font-size: 25px; margin-left: 30px;">
            <% if @recipe.favorited_by?(current_customer) %>
              <%= button_to recipe_favorites_path(@recipe), method: :delete, class: 'btn d-flex align-items-center', style: 'color: black;border-color:white;' do %>
                ♥<%= @recipe.favorites.count %>
              <% end %>
            <% else %>
              <%= button_to recipe_favorites_path(@recipe), method: :post, class: 'btn d-flex align-items-center', style: 'color: black;border-color:white;' do %>
                ♡<%= @recipe.favorites.count %>
              <% end %>
            <% end %>
          </span>
        </h1>
      </div>

      <table class="m-5">
        <tr>
          <th style="width:80px;">材料</th>
          <td><%= @recipe.material %></td>
        </tr>
      </table>

      <table class="m-5">
        <tr>
          <th style="width:80px;">作り方</th>
          <td><%= @recipe.make %></td>
        </tr>
      </table>


      <div class="row mt-5 mb-5 justify-content-center">
        <% if current_customer && current_customer.id == @recipe.customer_id %>
        <div class="col-2">
          <%= link_to "戻る", recipes_path, class: "btn btn-outline-secondary nav-link", style: 'color: black;' %>
        </div>
        <div class="col-2">
          <%= link_to "編集", edit_recipe_path(@recipe), class: "btn btn-outline-secondary nav-link", style: 'color: black;' %>
        </div>
        <div class="col-2">
          <%= button_to "削除", recipe_path(@recipe), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "btn btn-outline-secondary nav-link", style: 'color: black; width: 120px;', form: { class: "d-inline" } %>
        </div>
      <% else %>
      <div class="col-2">
          <%= link_to "戻る", recipes_path, class: "btn btn-outline-secondary nav-link", style: 'color: black;' %>
      </div>
      <% end %>

      <div class="m-5 d-flex" style="padding-top:150px;">
        <h4>【レビュー】</h4>
        <p class=" mt-2">(<%= @recipe.post_comments.count %>件)</p>
        <%= link_to "コメントする", new_recipe_post_comment_path(@recipe), class: "btn btn-outline-secondary nav-link", style: 'color: black;width: 130px; margin-left:50px;' %>
      </div>
        <table class="table mb-5">
          <thead class="bg-light">
            <tr>
              <th>会員名</th>
              <th style="width:500px;">コメント</th>
              <th style="width:120px;"></th>
            </tr>
          </thead>
          <tbody>
          <% @recipe.post_comments.each do |post_comment| %>
            <tr>
              <td>
                <%= post_comment.customer.last_name %><%= post_comment.customer.first_name %>
              </td>
              <td>
                <%= post_comment.comment %>
              </td>
              <td>
                <% if current_customer && post_comment.customer == current_customer %>
                  <%= button_to "削除", recipe_post_comment_path(post_comment.recipe, post_comment), method: :delete, class: "btn btn-outline-secondary nav-link py-1", style: 'color: black; width: 70px;', form: { class: "d-inline" } %>
                <% end %>
              </td>
            </tr>
          <% end %>
          </tbody>
        </table>
      </div>
    </div>
    <%= render "public/recipes/ns" %>
  </div>
</div>